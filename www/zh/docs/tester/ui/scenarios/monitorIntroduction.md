# 场景监控介绍


## 场景监控信息

| 参数                 | 字段名                | 类型         | 必填     | 长度限制 | 说明                                                                 |
|----------------------|-----------------------|--------------|----------|----------|----------------------------------------------------------------------|
| **ID**               | id                   | `bigint`     | **条件** | /        | 监控任务唯一标识符；修改时必须                                       |
| **场景ID**           | scenarioId           | `long`       | **是**   | /        | 关联场景唯一标识                                                     |
| **监控名称**         | name                 | `string`     | **是**   | ≤100     | 监控任务名称                                                         |
| 描述                 | description          | `string`     | 否       | ≤200     | 监控任务描述                                                         |
| **时间设置**         | timeSetting          | `object`     | **是**   | /        | 监控执行时间配置                                                     |
| 服务器配置           | serverSetting        | `list`       | 否       | /        | 监控目标服务器配置                                                   |
| **通知设置**         | noticeSetting        | `object`     | **是**   | /        | 告警通知配置                                                         |
| **项目ID**           | projectId            | 只读         | /        | /        | 所属项目ID                                                           |
| 场景名称             | scenarioName         | `string`     | 只读     | /        | 关联场景名称                                                         |
| **监控状态**         | status               | `enum`       | 只读     | /        | **状态枚举**：待执行/成功/失败                                       |
| 失败原因             | failureMessage       | `string`     | 只读     | /        | 监控失败详细信息                                                     |
| 下次执行时间         | nextExecDate         | `datetime`   | 只读     | /        | 下次监控执行时间                                                     |
| 最后监控历史ID       | lastMonitorHistoryId | `long`       | 只读     | /        | 最后一次监控历史记录ID                                              |
| 最后监控时间         | lastMonitorDate      | `datetime`   | 只读     | /        | 最后一次监控执行时间                                                 |
| 监控统计             | count                | `object`     | 只读     | /        | 监控结果统计信息                                                     |
| 租户ID               | tenantId             | `long`       | 只读     | /        | 所属租户ID                                                           |
| 创建人ID             | createdBy            | `long`       | 只读     | /        | 监控任务创建人ID                                                     |
| 创建人姓名           | createdByName        | `string`     | 只读     | /        | 创建人姓名                                                           |
| 创建时间             | createdDate          | `datetime`   | 只读     | /        | 监控任务创建时间                                                     |
| 最后修改人ID         | lastModifiedBy       | `long`       | 只读     | /        | 最后修改人ID                                                         |
| 最后修改人姓名       | lastModifiedByName   | `string`     | 只读     | /        | 最后修改人姓名                                                       |
| 最后修改时间         | lastModifiedDate     | `datetime`   | 只读     | /        | 最后修改时间                                                         |

### 时间设置字段（timeSetting）

| 参数                 | 字段名                | 类型         | 必填     | 长度限制 | 说明                                                                 |
|----------------------|-----------------------|--------------|----------|----------|----------------------------------------------------------------------|
| **创建方式**         | createdAt             | `enum`       | **是**   | /        | **创建方式枚举**：立即/定时/周期                                     |
| 指定时间             | createdAtSomeDate     | `datetime`   | 条件     | /        | 定时执行的具体时间（当创建方式为"定时"时必须）                       |
| 周期单位             | periodicCreationUnit  | `enum`       | 条件     | /        | **周期单位枚举**：天/周/月（当创建方式为"周期"时必须）               |
| 星期几               | dayOfWeek             | `enum`       | 条件     | /        | **星期枚举**：周一至周日（当周期单位为"周"时必须）                    |
| 每月日期             | dayOfMonth            | `int`        | 条件     | /        | 每月具体日期（1-31）（当周期单位为"月"时必须）                       |
| 每日时间             | timeOfDay             | `time`       | 条件     | /        | 每日具体时间（当创建方式为"周期"时必须）                             |
| 小时                 | hourOfDay             | `int`        | 条件     | /        | 小时（1-23）（当创建方式为"周期"时必须）                             |
| 分钟                 | minuteOfHour          | `int`        | 条件     | /        | 分钟（1-59）（当创建方式为"周期"时必须）                             |
| 是否一次性           | onetime               | `boolean`    | 否       | /        | 是否只执行一次（默认`false`）                                       |

### 通知设置字段（noticeSetting）

| 参数                 | 字段名                | 类型         | 必填     | 长度限制 | 说明                                                                 |
|----------------------|-----------------------|--------------|----------|----------|----------------------------------------------------------------------|
| **启用通知**         | enabled               | `boolean`    | **是**   | /        | 是否启用告警通知                                                     |
| **组织类型**         | orgType               | `enum`       | **条件** | /        | **组织类型枚举**：用户/部门/小组（当启用通知时必须）                 |
| **组织列表**         | orgs                  | `set`        | **条件** | /        | 通知接收组织列表（当启用通知时必须）                                 |

### 监控统计字段（count）

| 参数                 | 字段名                | 类型         | 说明                                                                 |
|----------------------|-----------------------|--------------|----------------------------------------------------------------------|
| 总监控次数           | totalNum              | `int`        | 监控任务执行总次数                                                   |
| 成功次数             | successNum            | `int`        | 监控成功次数                                                         |
| 失败次数             | failureNum            | `int`        | 监控失败次数                                                         |
| 成功率               | successRate           | `double`     | 监控成功率（百分比）                                                 |
| 最近24小时次数       | last24HoursNum        | `int`        | 最近24小时监控次数                                                   |
| 最近24小时成功次数   | last24HoursSuccessNum | `int`        | 最近24小时监控成功次数                                               |
| 最近24小时成功率     | last24HoursSuccessRate| `double`     | 最近24小时监控成功率                                                 |
| 最近7天次数          | last7DayNum           | `int`        | 最近7天监控次数                                                      |
| 最近7天成功次数      | last7DaySuccessNum    | `int`        | 最近7天监控成功次数                                                  |
| 最近7天成功率        | last7DaySuccessRate   | `double`     | 最近7天监控成功率                                                    |
| 最近30天次数         | last30DayNum          | `int`        | 最近30天监控次数                                                     |
| 最近30天成功次数     | last30DaySuccessNum   | `int`        | 最近30天监控成功次数                                                 |
| 最近30天成功率       | last30DaySuccessRate  | `double`     | 最近30天监控成功率                                                    |
| 平均延迟时间         | avgDelayTime          | `object`     | 平均延迟时间对象                                                     |
| 最小延迟时间         | minDelayTime          | `object`     | 最小延迟时间对象                                                     |
| 最大延迟时间         | maxDelayTime          | `object`     | 最大延迟时间对象                                                     |
| P50延迟时间          | p50DelayTime          | `object`     | 50分位延迟时间                                                       |
| P75延迟时间          | p75DelayTime          | `object`     | 75分位延迟时间                                                       |
| P90延迟时间          | p90DelayTime          | `object`     | 90分位延迟时间                                                       |

### 监控状态（status）
| 枚举值       | 说明     |
|--------------|----------|
| `PENDING`    | 待执行   |
| `SUCCESS`    | 成功     |
| `FAILURE`    | 失败     |

### 组织类型（orgType）
| 枚举值       | 说明     |
|--------------|----------|
| `USER`       | 用户     |
| `DEPT`       | 部门     |
| `GROUP`      | 小组     |

### 时间单位（periodicCreationUnit）
| 枚举值       | 说明     |
|--------------|----------|
| `DAY`        | 天       |
| `WEEK`       | 周       |
| `MONTH`      | 月       |