# 脚本介绍

AngusTester的脚本功能可以帮助测试人员和开发团队编写一系列用于验证软件系统和应用程序的自动化测试步骤和指令。通过灵活的脚本编写，用户可以自定义测试场景和用例，从而实现自动化测试的目标，并满足可重复和持续测试的需求。此外，用户还可以通过脚本自定义Mock数据规则，生成符合业务需求或测试要求的数据。

## 关于脚本

脚本是AngusTester测试的核心组成部分，支持多种测试类型和使用场景。具体功能包括：

- 接口自动化测试：编写接口测试脚本以自动化执行功能测试、性能测试、稳定性测试等，提升测试效率和准确性。
- 场景测试：通过脚本灵活定义和配置测试场景，满足复杂业务逻辑的测试需求。
- 数据生成：通过编写Mock脚本，生成满足特定业务或测试要求的Mock数据，便于测试环境的搭建和数据的准备。

### 测试脚本
   
用户可以根据测试需求添加多种类型的测试脚本，包括：

- 功能测试脚本：验证软件功能是否按预期工作。
- 性能测试脚本：评估系统在特定负载下的响应时间和稳定性。
- 稳定性测试脚本：检查应用程序在长时间运行及高负荷情况下的稳定性。
- 自定义测试：根据特殊需求编写自定义测试脚本，灵活满足各类测试场景。

***具体定义：***
- [脚本规范](https://www.xcan.cloud/help/doc/205509853639082016?c=205531805216931883)
- [测试定义](https://www.xcan.cloud/help/doc/205509853639082016?c=205531805216931885)
- [测试示例](https://www.xcan.cloud/help/doc/205509853639082016?c=205531730055004214)

### 数据生成脚本

通过添加Mock脚本，用户可以：

- 生成Mock数据：模拟真实数据环境，便于开发和测试阶段的使用。
- 存储Mock数据：生成的数据可以存储到多个位置，包括：
    - 数据空间：集中管理和调用生成的数据。
    - 数据源：与其他应用程序或数据库集成，便于实际测试。
    - 本地执行节点：在本地执行环境中直接使用生成的数据。
    - 三方系统：与第三方系统进行数据交互和测试，提高测试的灵活性。

***具体定义：***
- [模拟数据](https://www.xcan.cloud/help/doc/205509853639082016?c=205531730055004216)
- [生成模拟数据示例](https://www.xcan.cloud/help/doc/205509853639082016?c=205531805216931887)

## 测试流程

脚本的使用流程通常包括以下步骤：
1. 编写脚本：根据测试需求编写自动化测试脚本或Mock脚本。
2. 调试脚本：在测试执行前，使用内置的调试工具检查场景逻辑，实时发现并解决潜在问题。
3. 执行测试：通过AngusTester平台执行脚本，监控测试过程并记录结果。
4. 结果分析：对测试结果进行分析和报告，评估系统的性能和稳定性。

## 数据权限

脚本数据权限控制是指在编写或使用特定脚本时，对脚本访问和操作进行严格的安全管理和控制的过程。

### 权限控制的目的

- 保护敏感信息：通过限制对敏感数据的访问，可以有效防止未经授权的数据泄露。
- 维护数据完整性：确保只有经过授权的用户或脚本能够修改数据，避免数据被误改或恶意篡改。
- 遵守法规要求：许多行业标准和法律法规都要求对个人数据进行严格的保护措施。

### 实施方法

允许管理员访问所有数据，而普通用户只能访问其工作相关被授权数据，支持授权方式如下：

- 共享权限：在脚本操作中选择“授权”，设置脚本为“无权限控制”，允许其他用户访问和执行。
- 指定权限：设置脚本为“有权限控制”，授权特定用户、部门或用户组脚本的部分或全部权限，确保安全性和可控性。

## 脚本信息

| 参数                 | 字段名                | 类型         | 必填     | 长度限制 | 说明                      |
|----------------------|-----------------------|--------------|----------|----------|-------------------------|
| **ID**               | id                   | `bigint`     | **条件** | /        | 脚本唯一标识符；<br/>修改时必须      |
| **项目ID**           | projectId            | `long`       | **是**   | /        | 所属项目唯一标识                |
| **脚本名称**         | name                 | `string`     | **是**   | ≤200     | 脚本标识名称                  |
| **脚本类型**         | type                 | `enum`       | **是**   | /        | 查看下面 [脚本来源（source）](#)  |
| **脚本内容**         | content              | `string`     | **是**   | ≤10MB    | YAML/JSON格式脚本内容         |
| 授权控制             | auth                 | `boolean`    | 否       | /        | 是否启用权限控制，<br/>默认`false` |
| 描述                 | description          | `string`     | 否       | ≤800     | 脚本功能描述                  |
| 服务ID               | serviceId            | `long`       | 只读     | /        | 关联服务ID                  |
| 脚本来源             | source               | `enum`       | 只读     | /        | 查看下面 [脚本类型（type）](#)    |
| 来源ID               | sourceId             | `long`       | 只读     | /        | 来源对象ID                  |
| 来源名称             | sourceName           | `string`     | 只读     | /        | 来源名称                    |
| 标签                 | tags                 | `list`       | 只读     | /        | 脚本标签列表                  |
| 权限列表             | permissions          | `list`       | 只读     | /        | 脚本权限配置                  |
| 插件类型             | plugin               | `string`     | 只读     | /        | 执行插件类型                  |
| 租户ID               | tenantId             | `long`       | 只读     | /        | 所属租户ID                  |
| 创建人ID             | createdBy            | `long`       | 只读     | /        | 脚本创建人ID                 |
| 创建人姓名           | createdByName        | `string`     | 只读     | /        | 创建人姓名                   |
| 创建时间             | createdDate          | `datetime`   | 只读     | /        | 脚本创建时间                  |
| 最后修改人ID         | lastModifiedBy       | `long`       | 只读     | /        | 最后修改人ID                 |
| 最后修改人姓名       | lastModifiedByName   | `string`     | 只读     | /        | 最后修改人姓名                 |
| 最后修改时间         | lastModifiedDate     | `datetime`   | 只读     | /        | 最后修改时间                  |

### 脚本类型（type）
| 枚举值               | 说明               |
|----------------------|--------------------|
| `TEST_FUNCTIONALITY` | 功能测试           |
| `TEST_PERFORMANCE`   | 性能测试           |
| `TEST_STABILITY`     | 稳定性测试         |
| `TEST_CUSTOMIZATION` | 自定义测试         |
| `MOCK_DATA`          | 模拟数据           |
| `MOCK_APIS`          | 模拟接口           |

### 脚本来源（source）
| 枚举值             | 说明             |
|--------------------|------------------|
| `USER_DEFINED`     | 自定义创建       |
| `IMPORTED`         | 导入创建         |
| `SERVICE_SMOKE`    | 服务冒烟测试     |
| `SERVICE_SECURITY` | 服务安全测试     |
| `API`              | 接口测试         |
| `SCENARIO`         | 场景测试         |
| `GENERATE_DATA`    | 生成数据         |