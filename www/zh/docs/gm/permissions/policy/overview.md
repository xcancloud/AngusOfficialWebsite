# 权限策略

::: tip 重要提示
> **权限策略** 是确保企业系统安全的核心机制，通过精确的资源访问控制规则实现"最小特权原则"。本系统提供细粒度权限管理，保障数据安全与合规运营。
:::

## 核心能力

```mermaid
graph LR
    A[权限策略定义] --> B[资源绑定]
    B --> C[主体授权]
    C --> D[访问鉴权]
    style A fill:#4CAF50,stroke:#388E3C
    style D fill:#FF9800,stroke:#EF6C00
```

- **四维策略模型**
  ```mermaid
  graph TB
      S[策略类型] --> R{资源类型}
      S --> O{操作范围}
      S --> E{生效条件}
      S --> V{验证机制}
  ```

- **策略元素定义**  
  | 元素类型       | 描述                  | 示例                      |
  |----------------|-----------------------|--------------------------|
  | 资源类型       | 受控对象分类          | 菜单/按钮/API    |
  | 操作范围       | 允许执行的动作        | 查看/编辑/删除/导出       |
  | 生效条件       | 策略应用场景          | 指定应用/授权后/审批后    |
  | 验证机制       | 权限验证逻辑          | 角色匹配/标签匹配/资源验证 |

## 预置策略

预定义应用权限策略通过标准化权限模板显著提升系统安全管控效率和合规性，同时大幅降低权限配置复杂度与实施风险。

### AngusGM

| 策略角色       | 资源范围          | 操作权限                              | 限制条件                |
|----------------|-------------------|---------------------------------------|-------------------------|
| GM_GUEST       | 全部功能模块      | 仅查看                                | 无数据修改权限          |
| GM_USER        | 常规操作模块      | 创建/编辑/查询                        | 禁用删除/重置/身份设置  |
| GM_ADMIN       | 全部功能模块      | 完全控制（含系统设置）                | 无                      |

### 费用中心

| 策略角色          | 资源范围          | 操作权限         | 限制条件                |
|-------------------|-------------------|--------------|-------------------------|
| EXPENSE_GUEST     | 费用看板/报表     | 数据查看         | 无交易操作权限          |
| EXPENSE_USER      | 常规费用操作      | 订单创建/查询/提交   | 禁用充值/提现/密码修改  |
| EXPENSE_ADMIN     | 全部功能          | 财务分析/资金操作/设置 | 无                      |

### 工单系统

| 策略角色          | 资源范围          | 操作权限                  | 限制条件                |
|-------------------|-------------------|---------------------------|-------------------------|
| WORKORDER_GUEST   | 工单列表/详情     | 查看工单状态              | 无操作权限              |
| WORKORDER_USER    | 所属工单          | 创建/处理/关闭工单         | 仅操作自有工单          |
| WORKORDER_ADMIN   | 全部工单          | 分配/转派/优先级调整       | 无                      |

### AngusTester

| 策略角色             | 资源范围          | 操作权限                  | 限制条件                |
|----------------------|-------------------|---------------------------|-------------------------|
| ANGUSTESTER_GUEST    | 测试功能模块      | 功能查看                  | 无设置权限              |
| ANGUSTESTER_USER     | 全部测试功能      | 用例设计/执行/报告生成    | 禁用应用设置            |
| ANGUSTESTER_ADMIN    | 系统+测试功能     | 环境配置/授权管理/全局设置 | 无                      |

## 主要字段说明

| 参数         | 字段名          | 类型     | 是否必须 | 长度限制 | 说明                                             |
|--------------|----------------|----------|----------|----------|--------------------------------------------------|
| ID          | id            | bigint   | 是       | /        | 策略 ID，策略在系统中唯一标识。                  |
| 名称        | name          | string   | 是       | 32       | 策略名称，如：配置管理。                         |
| 编码        | code          | string   | 是       | 80       | 策略编码，支持字符：数字、大小写字母、:\_-。    |
| 有效状态    | enabled       | boolean      | 是       | /        | 策略有效状态。                                     |
| 分类        | type          | string   | 是       | 20       | 策略分类。                                         |
| 默认策略    | default0      | boolean      | 是       | /        | 是否默认策略，设置后该策略可用于`默认权限策略`选项。 |
| 授权阶段    | grantStage    | string   | 是       | 20       | 授权阶段                                         |
| 描述        | description   | string   | 否       | 200      | 策略使用说明信息。                               |
| 应用ID      | appId         | bigint   | 是       | /        | 策略所属应用ID。                                   |
| 应用所属端  | clientId      | string   | 是       | 80       | 应用所属端。                                       |
| 租户ID      | tenantId      | bigint   | 是       | /        | 租户ID。                                           |
| 创建人      | createdBy     | bigint   | 是       | /        | 添加策略操作人。                                 |
| 创建时间    | createdDate   | datetime | 是       | /        | 创建策略时间。                                   |
| 最后修改人  | lastModifiedBy| bigint   | 是       | /        | 最后修改人。                                       |
| 最后修改时间| lastModifiedDate| datetime | 是       | /        | 最后修改时间。                                     |